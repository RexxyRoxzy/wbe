<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Roxzy - Dashboard</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap" rel="stylesheet" />
  
  <!-- Google API for fetching user profile -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background: #121212;
      color: white;
      height: 100vh;
      overflow: auto;
    }

    .header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      background: #222;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .logo {
      height: 48px;
      margin-right: 10px;
    }

    .brand-name {
      font-weight: 700;
      font-size: 1.5rem;
      margin-right: auto;
    }

    .profile {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: default;
    }

    .profile img {
      border-radius: 50%;
      width: 40px;
      height: 40px;
    }

    main {
      padding: 40px 20px;
      max-width: 900px;
      margin: 0 auto;
    }

    h1 {
      font-family: 'Press Start 2P', cursive;
      font-size: 2rem;
      margin-bottom: 20px;
      color: #00ffd5;
      text-align: center;
    }

    p {
      font-size: 1.2rem;
      line-height: 1.5;
      max-width: 700px;
      margin: 0 auto 40px auto;
      text-align: center;
    }

    .features {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .feature-card {
      background: #1e1e1e;
      border-radius: 8px;
      padding: 20px;
      width: 280px;
      box-shadow: 0 0 15px #00ffd5aa;
      transition: transform 0.3s ease;
      cursor: default;
    }

    .feature-card:hover {
      transform: scale(1.05);
    }

    .feature-card h2 {
      font-family: 'Press Start 2P', cursive;
      font-size: 1rem;
      margin-bottom: 10px;
      color: #00ffd5;
    }

    .feature-card p {
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
      color: #ccc;
    }
  </style>
</head>
<body>
  <header class="header">
    <img src="icon.png" alt="Logo" class="logo" />
    <span class="brand-name">roxzy</span>

    <div class="profile" id="profile">
      <!-- Photo profil + nom ici -->
    </div>
  </header>

  <main>
    <h1>Help to Create Discord Bots</h1>
    <p>
      Welcome to Roxzy Dashboard! Here you can find resources, guides, and cool fonts to build amazing Discord bots with ease.
    </p>

    <div class="features">
      <div class="feature-card">
        <h2>Easy Bot Setup</h2>
        <p>Follow step-by-step tutorials to quickly create your own Discord bots.</p>
      </div>
      <div class="feature-card">
        <h2>API Integration</h2>
        <p>Integrate popular APIs seamlessly to enhance your bots' functionality.</p>
      </div>
      <div class="feature-card">
        <h2>Custom Fonts</h2>
        <p>Use unique and cool fonts to give your bots personality and style.</p>
      </div>
      <div class="feature-card">
        <h2>Community Support</h2>
        <p>Join our community forums to share and learn from other bot creators.</p>
      </div>
    </div>
  </main>

  <script>
    // Récupérer le token de session Google stocké
    // Ici tu devras adapter selon comment tu stockes le token, 
    // pour cet exemple on va juste récupérer le profil via Google API One Tap

    function decodeJwtResponse(token) {
      var base64Url = token.split('.')[1];
      var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
          return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }

    // Dans un vrai projet, tu stockes le token en localStorage/sessionStorage ou via serveur
    // Ici on va faire un prompt pour simuler, sinon tu peux envoyer le token via URL, etc.

    // Exemple simple : récupère un token stocké dans localStorage sous 'google_token'
    const token = localStorage.getItem('google_token');
    if (!token) {
      // Si pas connecté, on redirige vers index.html
      window.location.href = "index.html";
    } else {
      const user = decodeJwtResponse(token);
      // Affiche le profil en haut à droite
      const profileDiv = document.getElementById('profile');
      profileDiv.innerHTML = `
        <img src="${user.picture}" alt="Profile Picture" />
        <span>${user.name}</span>
      `;
    }
  </script>
</body>
</html>
